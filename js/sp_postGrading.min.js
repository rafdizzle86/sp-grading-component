(function($){smartpost.sp_postGrading={setTypeID:function(){if(sp_globals){var types=sp_globals.SP_TYPES;if(types["Grading"]){this.typeID=types["Grading"];sp_globals.SP_TYPES[this.typeID]=this}}else{return 0}},initEditableGradeFields:function(fieldElems){var self=this;fieldElems.editable(function(value,settings){var fieldKey=$(this).data("fieldkey");var compID=$(this).data("compid");self.saveGrade(fieldKey,compID,value);return value},{placeholder:"Click to add a grade",onblur:"submit",cssclass:"sp_compTitleEditable",maxlength:35})},saveGrade:function(fieldKey,compID,grade){$.ajax({url:SP_AJAX_URL,type:"POST",data:{nonce:SP_NONCE,action:"sp_save_grade_ajax",grade:grade,fieldKey:fieldKey,compid:compID},dataType:"json",success:function(response,statusText,jqXHR){console.log(response)},error:function(jqXHR,statusText,errorThrown){smartpost.sp_postComponent.showError(errorThrown,null)}})},initComponent:function(component,postID,autoFocus){var self=this;var editableFields=component.find("."+self.GRADE_FIELD_EDITABLE_CLASS);self.initEditableGradeFields(editableFields)},init:function(){var self=this;self.GRADE_FIELD_EDITABLE_CLASS="grading-field-grade-editable";self.GRADE_FIELD_PREFIX_ID="grading-field-grade-";self.initEditableGradeFields($("."+self.GRADE_FIELD_EDITABLE_CLASS));self.setTypeID()}};$(document).ready(function(){smartpost.sp_postGrading.init()})})(jQuery);